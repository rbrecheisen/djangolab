
# Define an upstream component that points to our Django web application. We call it 'web'
# and Nginx should use it in the proxy_pass statement. Note that 'web' is also the allowed_hosts
# defined in the Django settings.py

upstream web {
    server app:8000;
}

#server {
#    listen 80;
#    return 301 https://$host$request_uri;
#}

server {

    listen 80;

    #listen 443 ssl;
    #ssl_certificate /etc/ssl/certs/espresso.maastrichtuniversity.nl.crt;
    #ssl_certificate_key /etc/ssl/certs/espresso.maastrichtuniversity.nl.key;

    client_max_body_size 100m;

    location / {
        proxy_read_timeout 7200;
        proxy_pass http://web;
    }

    location /static/ {
        autoindex on;
        alias /static/;
    }
}
